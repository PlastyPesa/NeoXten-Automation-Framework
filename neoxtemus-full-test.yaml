# Neoxtemus AI â€” Full UI Test
# Validates: complete user journey through all views with screenshots
# Strategy: harness (frontend-only via Vite, no Tauri binary needed)

project:
  type: tauri
  root: ../neoxtemus-ai
  tauri:
    strategy: harness
    harnessCommand: npm run dev
    devCwd: ui
    devUrl: http://localhost:1420/?automation=1

flows:
  # 1-2. Wait for app to load and screenshot Assistant view
  - name: step_01_assistant_welcome
    steps:
      - action: assert
        type: visible
        selector: "[data-testid='app-shell']"
        timeout: 30000
      - action: wait
        timeout: 3000
      - action: assert
        type: visible
        selector: "[data-testid='assistant-view']"
        timeout: 10000
  
  # 3-4. Click Vault and screenshot
  - name: step_02_vault_view
    steps:
      - action: click
        selector: "[data-testid='nav-vault']"
        timeout: 5000
      - action: wait
        timeout: 1000
  
  # 5-6. Click Memory and screenshot
  - name: step_03_memory_view
    steps:
      - action: click
        selector: "[data-testid='nav-memory']"
        timeout: 5000
      - action: wait
        timeout: 1000
  
  # 7-8. Click Files and screenshot
  - name: step_04_files_view
    steps:
      - action: click
        selector: "[data-testid='nav-files']"
        timeout: 5000
      - action: wait
        timeout: 1000
  
  # 9-10. Click back to Assistant and type text
  - name: step_05_assistant_typed_input
    steps:
      - action: click
        selector: "[data-testid='nav-assistant']"
        timeout: 5000
      - action: wait
        timeout: 1000
      - action: type
        selector: "[data-testid='assistant-input']"
        text: "Check my device health"
        timeout: 5000
      - action: wait
        timeout: 500
  
  # 11-12. Click settings and screenshot
  - name: step_06_settings_panel
    steps:
      - action: click
        selector: "[data-testid='topbar-settings']"
        timeout: 5000
      - action: wait
        timeout: 1000

gates:
  startupMaxMs: 30000
  noConsoleErrors: false

artifacts:
  traceOnFailure: true
  screenshotOnFailure: true
  screenshotFinal: true
  consoleLog: true
