# Neoxtemus â€” Navigation & UI validation (harness mode / frontend-only)
# Validates: onboarding step transitions, command bar trigger, form validation
# Note: Full vault CRUD tested via cargo tests (18/18 pass)

project:
  type: tauri
  root: ../neoxtemus/neoxtemus-app
  tauri:
    strategy: harness
    harnessCommand: npm run dev
    devCwd: .
    devUrl: http://localhost:1420

flows:
  - name: app_loads
    steps:
      - action: assert
        type: visible
        selector: "[data-testid='app-root']"
        timeout: 30000
      - action: wait
        timeout: 1500

  - name: onboarding_step_0_visible
    steps:
      - action: assert
        type: visible
        selector: "[data-testid='onboarding-step-0']"
        timeout: 10000
      - action: assert
        type: visible
        selector: "[data-testid='get-started-btn']"
        timeout: 5000

  - name: onboarding_step_0_to_1
    steps:
      - action: click
        selector: "[data-testid='get-started-btn']"
        timeout: 5000
      - action: wait
        timeout: 600
      - action: assert
        type: visible
        selector: "[data-testid='onboarding-step-1']"
        timeout: 5000
      - action: assert
        type: visible
        selector: "[data-testid='master-password-input']"
        timeout: 5000
      - action: assert
        type: visible
        selector: "[data-testid='confirm-password-input']"
        timeout: 5000

  - name: password_validation
    steps:
      - action: type
        selector: "[data-testid='master-password-input']"
        text: "Str0ng!Pass#2026"
        timeout: 5000
      - action: type
        selector: "[data-testid='confirm-password-input']"
        text: "Str0ng!Pass#2026"
        timeout: 5000
      - action: wait
        timeout: 300
      - action: click
        selector: "[data-testid='next-step-btn']"
        timeout: 5000
      - action: wait
        timeout: 600
      - action: assert
        type: visible
        selector: "[data-testid='onboarding-step-2']"
        timeout: 5000
      - action: assert
        type: visible
        selector: "[data-testid='setup-pin-input']"
        timeout: 5000

gates:
  startupMaxMs: 45000
  noConsoleErrors: false

artifacts:
  traceOnFailure: true
  screenshotOnFailure: true
  screenshotFinal: true
  consoleLog: true
